---
apiVersion: chaos-mesh.org/v1alpha1
kind: StressChaos
metadata:
  name: cpu-stress
  namespace: chaos-mesh
spec:
  mode: one
  selector:
    namespaces:
      - openmeet-production
    labelSelectors:
      'app': 'api'
  stressors:
    cpu:
      workers: 2
      load: 80
  duration: '5m'
  scheduler:
    cron: '@every 4h'
---
apiVersion: chaos-mesh.org/v1alpha1
kind: StressChaos
metadata:
  name: cpu-spike
  namespace: chaos-mesh
spec:
  mode: all
  selector:
    namespaces:
      - openmeet-production
  stressors:
    cpu:
      workers: 4
      load: 100
  duration: '30s'
